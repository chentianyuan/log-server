# Migration `20200426140013-init`

This migration has been generated by 徐帅武 at 4/26/2020, 2:00:13 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `logserver`.`Log` (
    `appId` varchar(191) NOT NULL ,
    `content` varchar(191) NOT NULL  ,
    `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    `id` varchar(191) NOT NULL  ,
    `user` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `logserver`.`Monitor` (
    `appId` varchar(191) NOT NULL ,
    `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    `event` varchar(191) NOT NULL  ,
    `eventParam` varchar(191) NOT NULL  ,
    `eventTime` datetime(3) NOT NULL  ,
    `eventUser` varchar(191) NOT NULL  ,
    `id` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `logserver`.`App` (
    `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    `describe` varchar(191)   ,
    `id` varchar(191) NOT NULL  ,
    `name` varchar(191) NOT NULL  ,
    `updatedAt` datetime(3) NOT NULL  ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `logserver`.`Log` ADD FOREIGN KEY (`appId`) REFERENCES `logserver`.`App`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `logserver`.`Monitor` ADD FOREIGN KEY (`appId`) REFERENCES `logserver`.`App`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200426140013-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,45 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource mysql {
+  provider = "mysql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Log {
+  id String @id @default(cuid())
+  createdAt DateTime @default(now())
+  user String
+  content String
+  app App @relation(fields: [appId], references: [id])
+  appId String
+
+  // @@index([appId], name: "appId")
+}
+
+model Monitor {
+  id String @id @default(cuid())
+  event String
+  eventUser String
+  eventParam String
+  eventTime DateTime
+  createdAt DateTime @default(now())
+  app App @relation(fields: [appId], references: [id])
+  appId String
+
+  // @@index([appId], name: "appId")
+}
+
+model App {
+  id String @id @default(cuid())
+  name String
+  describe String?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  Log Log[]
+  Monitor Monitor[]
+}
```


